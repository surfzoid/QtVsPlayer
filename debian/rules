#!/usr/bin/make -f
#export DH_VERBOSE=1
# This is the debhelper compatability version to use.

#export DH_COMPAT=3
DESTDIR=$(CURDIR)/debian/project
TR_DIR=$(CURDIR)/debian/project/usr/share/QtVsPlayer/translations/
DEB_HOST_MULTIARCH ?= $(shell dpkg-architecture -qDEB_HOST_MULTIARCH)
CONFIGURE_EXTRA_FLAGS += --libdir=\$${prefix}/lib/$(DEB_HOST_MULTIARCH)
BUILDDIR=$(CURDIR)
PKGBUILDDIR=$(CURDIR)

override_dh_auto_configure:
	qmake QtVsPlayer.pro
	dh_auto_configure -- $(CONFIGURE_EXTRA_FLAGS)

override_dh_clean:
	dh_testdir
	dh_testroot
	dh_clean

override_dh_auto_build:  configure
	dh_testdir
	lrelease QtVsPlayer_fr_FR.ts
	$(MAKE)

override_dh_auto_install: build
	mkdir -p $(TR_DIR)
	cp QtVsPlayer_fr_FR.qm $(TR_DIR)
	$(MAKE) INSTALL_ROOT=usr/share install
	dh_installdirs

binary: build install
	 dh_testdir
	 dh_testroot
	 dh_installmenu
	 dh_link
	 dh_strip
	 dh_compress
	 dh_fixperms
	 dh_installdeb
	 dh_shlibdeps
	 dh_gencontrol
	 dh_md5sums
	 dh_builddeb
